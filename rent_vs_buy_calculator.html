<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú2 ‚Äî –ê—Ä–µ–Ω–¥–∞ vs –ü–æ–∫—É–ø–∫–∞</title>
    <meta name="description" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∞—Ä–µ–Ω–¥—ã –∏ –ø–æ–∫—É–ø–∫–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –æ—Ç –ú2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –£—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–∞–ª–æ–≥–∏ –∏ —Ä–æ—Å—Å–∏–π—Å–∫–æ–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ.">
    <meta name="keywords" content="–∞—Ä–µ–Ω–¥–∞ –≤—Å –ø–æ–∫—É–ø–∫–∞, –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞—Ä–µ–Ω–¥—ã –∏ –ø–æ–∫—É–ø–∫–∏, –ú2, –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏, –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏">
    <meta property="og:title" content="–ú2 ‚Äî –ê—Ä–µ–Ω–¥–∞ vs –ü–æ–∫—É–ø–∫–∞">
    <meta property="og:description" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∞—Ä–µ–Ω–¥—ã –∏ –ø–æ–∫—É–ø–∫–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –æ—Ç –ú2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://m2-calculators-dfol1ftj8-nikita-tita-projects.vercel.app/rent_vs_buy_calculator.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="–ú2 ‚Äî –ê—Ä–µ–Ω–¥–∞ vs –ü–æ–∫—É–ø–∫–∞">
    <meta name="twitter:description" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∞—Ä–µ–Ω–¥—ã –∏ –ø–æ–∫—É–ø–∫–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –æ—Ç –ú2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.">
    
    <!-- Favicon and Icons -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#4F2CD9">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
    <link rel="stylesheet" href="m2-theme.css">
    <link rel="stylesheet" href="m2-header.css">
    <link rel="stylesheet" href="m2-ui-components.css">
    <link rel="stylesheet" href="quick-fixes.css">
    <link rel="stylesheet" href="print-styles.css">
    <link rel="stylesheet" href="result-animations.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="tooltip-system.js"></script>
    <script src="calculator-storage.js"></script>
    <script src="pdf-export.js"></script>
    <script src="components.js"></script>
    <script src="advanced-ux-enhancements.js"></script>
    <script src="analytics.js"></script>
    <script src="auto-sliders.js"></script>
    <script src="loading-states.js"></script>
    <script src="input-validation.js"></script>
    <script src="keyboard-shortcuts.js"></script>
    <script src="result-animator.js"></script>
    <script src="m2-enhancements-loader.js"></script>
    <!-- –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();
   for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
   k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js?id=104341432", "ym");
   ym(104341432, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true,webvisor:true,trackHash:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/104341432" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
            color: #333;
            line-height: 1.4;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo {
            color: #4F2CD9 !important;
            font-size: 48px;
            font-weight: 700;
            color: #3416b6;
            margin-bottom: 12px;
        }

        .title {
            font-size: 32px;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
        }

        .subtitle {
            font-size: 18px;
            color: #666;
        }

        .back-link {
            color: #4F2CD9 !important;
            color: #3416b6;
            text-decoration: none;
            font-size: 14px;
            margin-bottom: 20px;
            display: inline-block;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        /* Mode Switch */
        .mode-switch {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
        }

        .mode-toggle {
            background: white;
            border-radius: 12px;
            padding: 4px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.1);
            display: flex;
            border: 1px solid #e9ecef;
        }

        .mode-btn {
            padding: 12px 24px;
            border: none;
            background: transparent;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #666;
        }

        .mode-btn.active {
            background: #3416b6;
            color: white;
            box-shadow: 0 2px 8px rgba(52, 22, 182, 0.3);
        }

        /* Calculator Layout */
        .calculator {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            margin-bottom: 40px;
        }

        .calculator.basic-mode {
            grid-template-columns: 1fr;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .inputs, .results {
            background: white;
            border-radius: 16px;
            padding: 28px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .section-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 24px;
            color: #333;
        }

        .input-group {
            margin-bottom: 24px;
        }

        .input-label {
            display: block;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .input-field {
            width: 100%;
            padding: 16px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 16px;
            background: white;
            transition: border-color 0.2s;
            appearance: textfield;
        }

        .input-field:focus {
            outline: none;
            border-color: #3416b6;
        }

        .input-field::-webkit-outer-spin-button,
        .input-field::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .quick-buttons {
            display: flex;
            gap: 8px;
            margin-top: 8px;
            flex-wrap: wrap;
        }

        .quick-btn {
            background: #4F2CD9;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s ease;
            min-height: 44px;
        }

        .quick-btn:hover, .quick-btn.active {
            background: #3F23AE;
        }

        /* Results */
        .result-item {
            margin-bottom: 24px;
        }

        .result-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 4px;
        }

        .result-value {
            font-size: 28px;
            font-weight: 700;
            color: #333;
        }

        .result-value.primary {
            color: #3416b6;
            font-size: 36px;
        }

        .result-value.success {
            color: #28a745;
        }

        .result-value.warning {
            color: #856404;
        }

        .result-value.danger {
            color: #dc3545;
        }

        /* Basic Mode Results */
        .basic-result {
            text-align: center;
            padding: 40px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .basic-result .result-value {
            font-size: 48px;
            color: #28a745;
            margin-bottom: 12px;
        }

        .basic-result .result-label {
            font-size: 18px;
            color: #666;
        }

        .basic-result .winner {
            color: #28a745;
        }

        .basic-result .loser {
            color: #dc3545;
        }

        /* Advanced Mode Features */
        .advanced-features {
            display: none;
        }

        .advanced-features.active {
            display: block;
        }

        /* Comparison Results */
        .comparison-results {
            background: white;
            border-radius: 16px;
            padding: 28px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 40px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            margin-top: 24px;
        }

        .comparison-option {
            padding: 28px;
            border-radius: 16px;
            text-align: center;
            position: relative;
        }

        .comparison-option.rent {
            background: linear-gradient(135deg, #3416b6, #2912a3);
            color: white;
        }

        .comparison-option.buy {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }

        .comparison-option.winner {
            border: 4px solid #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .comparison-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .comparison-cost {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .comparison-savings {
            font-size: 18px;
            margin-bottom: 16px;
            opacity: 0.9;
        }

        .comparison-details {
            font-size: 14px;
            opacity: 0.8;
            line-height: 1.5;
        }

        /* Cost Breakdown */
        .cost-breakdown {
            background: white;
            border-radius: 16px;
            padding: 28px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 40px;
        }

        .breakdown-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            margin-top: 24px;
        }

        .breakdown-column {
            padding: 24px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .breakdown-column h3 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
        }

        .breakdown-column.rent h3 {
            color: #3416b6;
        }

        .breakdown-column.buy h3 {
            color: #28a745;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #dee2e6;
        }

        .breakdown-item:last-child {
            border-bottom: none;
            font-weight: 700;
            font-size: 18px;
        }

        .breakdown-label {
            color: #666;
        }

        .breakdown-value {
            font-weight: 600;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .btn, .btn-primary {
            background: #4F2CD9;
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
            min-height: 48px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover, .btn-primary:hover {
            background: #3F23AE;
        }

        .btn-secondary {
            background: #797981;
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
            min-height: 48px;
        }

        .btn-secondary:hover {
            background: #5A5A61;
        }

        /* Parameter Groups */
        .parameter-group {
            margin-bottom: 32px;
            padding: 24px;
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border: 1px solid #e9ecef;
        }

        .group-header {
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f8f9fa;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            flex-wrap: wrap;
            gap: 10px;
        }

        .group-header h3 {
            margin: 0;
            color: #333;
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .group-description {
            color: #666;
            font-size: 14px;
            font-style: italic;
            flex-basis: 100%;
        }

        @media (max-width: 768px) {
            .calculator {
                grid-template-columns: 1fr;
                gap: 24px;
            }

            .calculator.basic-mode {
                max-width: none;
            }

            .container {
                padding: 24px 16px;
            }

            .inputs, .results, .comparison-results, .cost-breakdown {
                padding: 24px;
            }

            .basic-result .result-value {
                font-size: 36px;
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .breakdown-grid {
                grid-template-columns: 1fr;
            }
        }
        @media (max-width: 768px) {
            .container { padding: 20px 15px; }
            .input-field, .input-field select { font-size: 16px; padding: 14px; min-height: 48px; }
            .quick-btn { padding: 12px 16px; font-size: 14px; min-height: 44px; }
            .btn, .btn-primary, .btn-secondary { min-height: 48px; padding: 16px 24px; font-size: 16px; }
            .grid-2 { grid-template-columns: 1fr !important; }
            .results-grid { grid-template-columns: 1fr !important; }
            table { display: block; overflow-x: auto; -webkit-overflow-scrolling: touch; }
        }
        @media (max-width: 375px) {
            .container { padding: 12px 8px; }
            .header h1, .title { font-size: 24px; }
        }
    </style>
</head>
<body>
    <!-- M2.ru Header -->
    <header class="m2-header">
        <div class="m2-header-content">
            <!-- Logo -->
            <div class="m2-header-logo">
                <a href="https://m2.ru/" target="_blank" rel="noopener">
                    <svg width="58" height="52" viewBox="0 0 58 52" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M17 0H58V41H41V52H0V11H17V0Z" fill="#3216B5"></path>
                        <path d="M44.157 27.392V24.6531H37.5997V24.6298C39.9124 23.6013 43.9483 21.8471 43.9483 18.1997C43.9483 15.3184 41.5538 12.8572 38.1712 12.8572C34.7887 12.8572 33.0611 15.1883 32.3001 17.2899L34.8036 18.2698C35.3685 16.5165 36.363 15.4468 38.1945 15.4468C39.794 15.4468 41.1117 16.6404 40.9809 18.223C40.8122 20.2646 38.6293 21.7447 36.6206 22.8487C35.0867 23.692 32.7112 24.889 32.7112 24.889V27.392H44.157Z" fill="white"></path>
                        <path d="M12.0522 24.663V38.3574H15.0083V28.0866L19.2383 38.3574H21.4807L25.6344 28.0866V38.3574H28.6158V24.663H24.3094L20.334 34.4851L16.3333 24.663H12.0522Z" fill="white"></path>
                    </svg>
                </a>
            </div>

            <!-- Navigation -->
            <nav class="m2-header-nav">
                <div class="m2-header-nav-menu">
                    <a href="https://m2.ru/moskva/novostroyki/" target="_blank" rel="noopener" class="m2-header-nav-link">–ù–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∏</a>
                    <a href="https://m2.ru/ipoteka/" target="_blank" rel="noopener" class="m2-header-nav-link">–ò–ø–æ—Ç–µ–∫–∞</a>
                    <a href="https://m2.ru/services/deal/" target="_blank" rel="noopener" class="m2-header-nav-link">–°–¥–µ–ª–∫–∞</a>
                    <a href="index.html" class="m2-header-nav-link m2-header-nav-link-active">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã</a>
                </div>
            </nav>

            <!-- User Actions -->
            <div class="m2-header-actions">
                <a href="https://m2.ru/login/" target="_blank" rel="noopener" class="m2-header-login-btn">–í–æ–π—Ç–∏</a>
            </div>
        </div>
    </header>

    <div class="container">
        <a href="index.html" class="back-link">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞–º</a>

        <div class="header">
            <h1 class="title">–ê—Ä–µ–Ω–¥–∞ vs –ü–æ–∫—É–ø–∫–∞</h1>
            <p class="subtitle">–°—Ä–∞–≤–Ω–∏—Ç–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –≤—ã–≥–æ–¥—É –∞—Ä–µ–Ω–¥—ã –∏ –ø–æ–∫—É–ø–∫–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</p>
        </div>

        <!-- Mode Switch -->
        <div class="mode-switch">
            <div class="mode-toggle">
                <button class="mode-btn active" onclick="switchMode('basic')">–ë–∞–∑–æ–≤—ã–π</button>
                <button class="mode-btn" onclick="switchMode('advanced')">–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π</button>
            </div>
        </div>

        <div class="calculator basic-mode" id="calculatorContainer">
            <div class="inputs">
                <!-- –ì—Ä—É–ø–ø–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ -->
                <div class="parameter-group">
                    <div class="group-header">
                        <h3>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 8px;">
                                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                <polyline points="9,22 9,12 15,12 15,22"></polyline>
                            </svg>
                            –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
                        </h3>
                        <div class="group-description">–°—Ç–æ–∏–º–æ—Å—Ç—å –æ–±—ä–µ–∫—Ç–∞ –∏ –∞—Ä–µ–Ω–¥–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏</div>
                    </div>
                
                <div class="input-group">
                    <label class="input-label" for="propertyPrice">–°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</label>
                    <input type="number" id="propertyPrice" class="input-field" value="8000000" min="500000" max="50000000" step="100000">
                    <div class="quick-buttons">
                        <button class="quick-btn" onclick="setValue('propertyPrice', 5000000)">5 –º–ª–Ω</button>
                        <button class="quick-btn" onclick="setValue('propertyPrice', 8000000)">8 –º–ª–Ω</button>
                        <button class="quick-btn" onclick="setValue('propertyPrice', 12000000)">12 –º–ª–Ω</button>
                        <button class="quick-btn" onclick="setValue('propertyPrice', 15000000)">15 –º–ª–Ω</button>
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label" for="monthlyRent">–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞</label>
                    <input type="number" id="monthlyRent" class="input-field" value="80000" min="10000" max="1000000" step="5000">
                    <div class="quick-buttons">
                        <button class="quick-btn" onclick="setValue('monthlyRent', 60000)">60 —Ç—ã—Å</button>
                        <button class="quick-btn" onclick="setValue('monthlyRent', 80000)">80 —Ç—ã—Å</button>
                        <button class="quick-btn" onclick="setValue('monthlyRent', 120000)">120 —Ç—ã—Å</button>
                        <button class="quick-btn" onclick="setValue('monthlyRent', 150000)">150 —Ç—ã—Å</button>
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label" for="downPayment">–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å</label>
                    <input type="number" id="downPayment" class="input-field" value="2400000" min="0" step="100000">
                    <div class="quick-buttons">
                        <button class="quick-btn" onclick="setPercentage('downPayment', 20)">20%</button>
                        <button class="quick-btn" onclick="setPercentage('downPayment', 30)">30%</button>
                        <button class="quick-btn" onclick="setPercentage('downPayment', 50)">50%</button>
                        <button class="quick-btn" onclick="setPercentage('downPayment', 100)">100%</button>
                    </div>
                </div>
                </div>

                <!-- –ì—Ä—É–ø–ø–∞ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è -->
                <div class="parameter-group">
                    <div class="group-header">
                        <h3>
                            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" style=\"vertical-align: middle; margin-right: 8px;\">
                                <rect x=\"1\" y=\"4\" width=\"22\" height=\"16\" rx=\"2\" ry=\"2\"></rect>
                                <line x1=\"1\" y1=\"10\" x2=\"23\" y2=\"10\"></line>
                            </svg>
                            –£—Å–ª–æ–≤–∏—è —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è
                        </h3>
                        <div class="group-description">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–∏—è –∏ –∏–ø–æ—Ç–µ–∫–∏</div>
                    </div>

                <div class="input-group">
                    <label class="input-label" for="mortgageRate">–°—Ç–∞–≤–∫–∞ –ø–æ –∏–ø–æ—Ç–µ–∫–µ, %</label>
                    <input type="number" id="mortgageRate" class="input-field" value="8.5" min="1" max="30" step="0.1">
                    <div class="quick-buttons">
                        <button class="quick-btn" onclick="setValue('mortgageRate', 7.5)">7.5%</button>
                        <button class="quick-btn" onclick="setValue('mortgageRate', 8.5)">8.5%</button>
                        <button class="quick-btn" onclick="setValue('mortgageRate', 9.5)">9.5%</button>
                        <button class="quick-btn" onclick="setValue('mortgageRate', 11)">11%</button>
                    </div>
                </div>

                </div>

                <!-- Advanced Mode Fields -->
                <div class="advanced-features">
                    <!-- –ì—Ä—É–ø–ø–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ -->
                    <div class="parameter-group">
                        <div class="group-header">
                            <h3>
                                <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" style=\"vertical-align: middle; margin-right: 8px;\">
                                    <polyline points=\"23,6 13.5,15.5 8.5,10.5 1,18\"></polyline>
                                    <polyline points=\"17,6 23,6 23,12\"></polyline>
                                </svg>
                                –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
                            </h3>
                            <div class="group-description">–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã</div>
                        </div>
                    <div class="input-group">
                        <label class="input-label" for="rentGrowth">–†–æ—Å—Ç –∞—Ä–µ–Ω–¥–Ω–æ–π –ø–ª–∞—Ç—ã, % –≤ –≥–æ–¥</label>
                        <input type="number" id="rentGrowth" class="input-field" value="4" min="0" max="20" step="0.5">
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="propertyGrowth">–†–æ—Å—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏, % –≤ –≥–æ–¥</label>
                        <input type="number" id="propertyGrowth" class="input-field" value="3" min="0" max="20" step="0.5">
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="maintenanceCost">–†–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ (–≤ –º–µ—Å—è—Ü)</label>
                        <input type="number" id="maintenanceCost" class="input-field" value="20000" min="0" step="1000">
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="propertyTax">–ù–∞–ª–æ–≥ –Ω–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å (–≤ –≥–æ–¥)</label>
                        <input type="number" id="propertyTax" class="input-field" value="15000" min="0" step="1000">
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="investmentReturn">–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π, %</label>
                        <input type="number" id="investmentReturn" class="input-field" value="7" min="0" max="20" step="0.5">
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="transactionCosts">–†–∞—Å—Ö–æ–¥—ã –Ω–∞ –ø–æ–∫—É–ø–∫—É (–Ω–æ—Ç–∞—Ä–∏—É—Å, —Ä–∏—ç–ª—Ç–æ—Ä)</label>
                        <input type="number" id="transactionCosts" class="input-field" value="400000" min="0" step="10000">
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="taxDeduction">–ù–∞–ª–æ–≥–æ–≤—ã–π –≤—ã—á–µ—Ç (13% –¥–æ 2 –º–ª–Ω + 3 –º–ª–Ω –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤)</label>
                        <input type="number" id="taxDeduction" class="input-field" value="650000" min="0" step="10000">
                        <div class="quick-buttons">
                            <button class="quick-btn" onclick="setValue('taxDeduction', 0)">–ù–µ—Ç</button>
                            <button class="quick-btn" onclick="setValue('taxDeduction', 260000)">260 —Ç—ã—Å</button>
                            <button class="quick-btn active" onclick="setValue('taxDeduction', 650000)">650 —Ç—ã—Å</button>
                        </div>
                    </div>
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label" for="comparisonPeriod">–ü–µ—Ä–∏–æ–¥ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è, –ª–µ—Ç</label>
                    <input type="number" id="comparisonPeriod" class="input-field" value="10" min="1" max="30" step="1">
                    <div class="quick-buttons">
                        <button class="quick-btn" onclick="setValue('comparisonPeriod', 5)">5 –ª–µ—Ç</button>
                        <button class="quick-btn" onclick="setValue('comparisonPeriod', 10)">10 –ª–µ—Ç</button>
                        <button class="quick-btn" onclick="setValue('comparisonPeriod', 15)">15 –ª–µ—Ç</button>
                        <button class="quick-btn" onclick="setValue('comparisonPeriod', 20)">20 –ª–µ—Ç</button>
                    </div>
                </div>
            </div>

            <!-- Basic Mode Result -->
            <div class="basic-result" id="basicResult">
                <div class="result-value winner" id="basicWinner">–ü–æ–∫—É–ø–∫–∞ –≤—ã–≥–æ–¥–Ω–µ–µ</div>
                <div class="result-label">–Ω–∞ <span id="basicSavings">2 450 000 ‚ÇΩ</span></div>
            </div>

            <!-- Advanced Mode Results -->
            <div class="results advanced-features">
                <h2 class="section-title">–†–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</h2>
                
                <div class="result-item">
                    <div class="result-label">–û–±—â–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –∞—Ä–µ–Ω–¥—É</div>
                    <div class="result-value primary" id="totalRentCost">11 840 000 ‚ÇΩ</div>
                </div>

                <div class="result-item">
                    <div class="result-label">–û–±—â–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –ø–æ–∫—É–ø–∫—É</div>
                    <div class="result-value" id="totalBuyCost">9 390 000 ‚ÇΩ</div>
                </div>

                <div class="result-item">
                    <div class="result-label">–≠–∫–æ–Ω–æ–º–∏—è –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ</div>
                    <div class="result-value success" id="totalSavings">2 450 000 ‚ÇΩ</div>
                </div>

                <div class="result-item">
                    <div class="result-label">–¢–æ—á–∫–∞ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏</div>
                    <div class="result-value" id="breakevenPoint">6.2 –≥–æ–¥–∞</div>
                </div>
            </div>
        </div>

        <!-- Advanced Mode Additional Sections -->
        <div class="advanced-features">
            <!-- Comparison Results -->
            <div class="comparison-results">
                <h2 class="section-title">–î–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ</h2>
                <div class="comparison-grid">
                    <div class="comparison-option rent" id="rentOption">
                        <div class="comparison-title">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 8px;">
                                <line x1="12" y1="1" x2="12" y2="23"></line>
                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                            </svg>
                            –ê—Ä–µ–Ω–¥–∞
                        </div>
                        <div class="comparison-cost" id="rentTotalCost">11 840 000 ‚ÇΩ</div>
                        <div class="comparison-savings" id="rentSavings"></div>
                        <div class="comparison-details" id="rentDetails">
                            –í–∫–ª—é—á–∞–µ—Ç –∞—Ä–µ–Ω–¥–Ω—É—é –ø–ª–∞—Ç—É, –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ –∏ —Ä–æ—Å—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∞—Ä–µ–Ω–¥—ã
                        </div>
                    </div>
                    <div class="comparison-option buy winner" id="buyOption">
                        <div class="comparison-title">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 8px;">
                                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                <polyline points="9,22 9,12 15,12 15,22"></polyline>
                            </svg>
                            –ü–æ–∫—É–ø–∫–∞
                        </div>
                        <div class="comparison-cost" id="buyTotalCost">9 390 000 ‚ÇΩ</div>
                        <div class="comparison-savings" id="buySavings">–≠–∫–æ–Ω–æ–º–∏—è: 2 450 000 ‚ÇΩ</div>
                        <div class="comparison-details" id="buyDetails">
                            –í–∫–ª—é—á–∞–µ—Ç –∏–ø–æ—Ç–µ–∫—É, —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ, –Ω–∞–ª–æ–≥–∏ –∑–∞ –≤—ã—á–µ—Ç–æ–º —Ä–æ—Å—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cost Breakdown -->
            <div class="cost-breakdown">
                <h2 class="section-title">–†–∞–∑–±–∏–≤–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤</h2>
                <div class="breakdown-grid">
                    <div class="breakdown-column rent">
                        <h3>
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 8px;">
                                <line x1="12" y1="1" x2="12" y2="23"></line>
                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                            </svg>
                            –ê—Ä–µ–Ω–¥–∞
                        </h3>
                        <div class="breakdown-item">
                            <span class="breakdown-label">–ê—Ä–µ–Ω–¥–Ω–∞—è –ø–ª–∞—Ç–∞</span>
                            <span class="breakdown-value" id="rentPayments">9 600 000 ‚ÇΩ</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">–ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏</span>
                            <span class="breakdown-value" id="rentUtilities">1 200 000 ‚ÇΩ</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">–£–ø—É—â–µ–Ω–Ω–∞—è –≤—ã–≥–æ–¥–∞*</span>
                            <span class="breakdown-value" id="rentOpportunityCost">1 040 000 ‚ÇΩ</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">–ò—Ç–æ–≥–æ</span>
                            <span class="breakdown-value" id="rentTotal">11 840 000 ‚ÇΩ</span>
                        </div>
                    </div>
                    <div class="breakdown-column buy">
                        <h3>
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 8px;">
                                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                <polyline points="9,22 9,12 15,12 15,22"></polyline>
                            </svg>
                            –ü–æ–∫—É–ø–∫–∞
                        </h3>
                        <div class="breakdown-item">
                            <span class="breakdown-label">–ò–ø–æ—Ç–µ—á–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏</span>
                            <span class="breakdown-value" id="mortgagePayments">7 020 000 ‚ÇΩ</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∏ –Ω–∞–ª–æ–≥–∏</span>
                            <span class="breakdown-value" id="maintenanceTotal">2 400 000 ‚ÇΩ</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">–†–∞—Å—Ö–æ–¥—ã –Ω–∞ –ø–æ–∫—É–ø–∫—É</span>
                            <span class="breakdown-value" id="transactionTotal">400 000 ‚ÇΩ</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">–†–æ—Å—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏</span>
                            <span class="breakdown-value" id="appreciationBenefit">-2 730 000 ‚ÇΩ</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">–ò—Ç–æ–≥–æ</span>
                            <span class="breakdown-value" id="buyTotal">9 390 000 ‚ÇΩ</span>
                        </div>
                    </div>
                </div>
                <p style="font-size: 12px; color: #666; margin-top: 16px; text-align: center;">
                    *–£–ø—É—â–µ–Ω–Ω–∞—è –≤—ã–≥–æ–¥–∞ - –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –æ—Ç –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –≤–∑–Ω–æ—Å–∞
                </p>
            </div>
        </div>

        <!-- –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤ -->
        <div class="calculation-details" style="margin: 40px 0; background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <div class="details-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; border-bottom: 2px solid #f0f0f0; padding-bottom: 15px;">
                <h3 style="margin: 0; color: #3416b6; font-size: 24px;">
                    <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" style=\"vertical-align: middle; margin-right: 8px;\">
                        <line x1=\"18\" y1=\"20\" x2=\"18\" y2=\"10\"></line>
                        <line x1=\"12\" y1=\"20\" x2=\"12\" y2=\"4\"></line>
                        <line x1=\"6\" y1=\"20\" x2=\"6\" y2=\"14\"></line>
                    </svg>
                    –ö–∞–∫ –º—ã —Å—á–∏—Ç–∞–µ–º
                </h3>
                <button type="button" onclick="toggleCalculationDetails()" style="background: #3416b6; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 14px;">
                    –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å—á–µ—Ç—ã
                </button>
            </div>
            
            <div id="detailsContent" style="display: none;">
                <div class="calculation-steps" id="calculationSteps"></div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="exportToPDF()">
                üìÑ PDF
            </button>
            <button class="btn btn-primary" onclick="exportToExcel()">
                üìä Excel
            </button>
            <button class="btn btn-secondary" onclick="resetCalculator()">
                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" style=\"vertical-align: middle; margin-right: 8px;\">
                    <polyline points=\"23,4 23,10 17,10\"></polyline>
                    <polyline points=\"1,20 1,14 7,14\"></polyline>
                    <path d=\"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15\"></path>
                </svg>
                –°–±—Ä–æ—Å–∏—Ç—å
            </button>
        </div>
    </div>

    <script>
        let currentMode = 'basic';

        function formatNumber(num) {
            return new Intl.NumberFormat('ru-RU').format(Math.round(num));
        }

        function setValue(inputId, value) {
            document.getElementById(inputId).value = value;
            calculateComparison();
        }

        function setPercentage(inputId, percent) {
            const propertyPrice = parseFloat(document.getElementById('propertyPrice').value) || 0;
            const value = Math.round(propertyPrice * percent / 100);
            setValue(inputId, value);
        }

        function switchMode(mode) {
            currentMode = mode;
            const calculatorContainer = document.getElementById('calculatorContainer');
            const modeButtons = document.querySelectorAll('.mode-btn');
            const advancedFeatures = document.querySelectorAll('.advanced-features');

            // Update button states
            modeButtons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Update layout
            if (mode === 'basic') {
                calculatorContainer.classList.add('basic-mode');
                advancedFeatures.forEach(feature => feature.classList.remove('active'));
            } else {
                calculatorContainer.classList.remove('basic-mode');
                advancedFeatures.forEach(feature => feature.classList.add('active'));
            }

            calculateComparison();
        }

        function calculateComparison() {
            if (typeof ym !== 'undefined') {
                ym(104341432, 'reachGoal', 'calculation_made', {calculator: 'rent_vs_buy'});
            }
            const propertyPrice = parseFloat(document.getElementById('propertyPrice').value) || 0;
            const monthlyRent = parseFloat(document.getElementById('monthlyRent').value) || 0;
            const downPayment = parseFloat(document.getElementById('downPayment').value) || 0;
            const mortgageRate = parseFloat(document.getElementById('mortgageRate').value) || 0;
            const rentGrowth = parseFloat(document.getElementById('rentGrowth').value) || 0;
            const propertyGrowth = parseFloat(document.getElementById('propertyGrowth').value) || 0;
            const maintenanceCost = parseFloat(document.getElementById('maintenanceCost').value) || 0;
            const propertyTax = parseFloat(document.getElementById('propertyTax').value) || 0;
            const investmentReturn = parseFloat(document.getElementById('investmentReturn').value) || 0;
            const transactionCosts = parseFloat(document.getElementById('transactionCosts').value) || 0;
            const taxDeduction = parseFloat(document.getElementById('taxDeduction').value) || 0;
            const comparisonPeriod = parseFloat(document.getElementById('comparisonPeriod').value) || 0;

            if (propertyPrice <= 0 || monthlyRent <= 0 || comparisonPeriod <= 0) {
                return;
            }

            // Calculate rent costs
            let totalRentCost = 0;
            let currentRent = monthlyRent;
            for (let year = 1; year <= comparisonPeriod; year++) {
                totalRentCost += currentRent * 12;
                currentRent *= (1 + rentGrowth / 100);
            }

            // Add utility costs (estimate 15% of rent)
            const utilityCost = totalRentCost * 0.15;
            totalRentCost += utilityCost;

            // Calculate buy costs
            const loanAmount = propertyPrice - downPayment;
            const monthlyRate = mortgageRate / 100 / 12;
            const numberOfPayments = 30 * 12; // Assuming 30-year mortgage

            let monthlyPayment = 0;
            if (loanAmount > 0 && monthlyRate > 0) {
                monthlyPayment = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) /
                                (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
            }

            // –ò–°–ü–†–ê–í–õ–ï–ù–û: —É–±—Ä–∞–Ω–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–∫–∞–∂–∞–ª–æ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ä–∞—Å—á—ë—Ç—ã
            const mortgagePayments = monthlyPayment * 12 * comparisonPeriod;

            // –£–ø—É—â–µ–Ω–Ω–∞—è –≤—ã–≥–æ–¥–∞ –æ—Ç –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –≤–∑–Ω–æ—Å–∞
            const downPaymentOpportunityCost = downPayment * Math.pow(1 + investmentReturn / 100, comparisonPeriod) - downPayment;

            // –ò–°–ü–†–ê–í–õ–ï–ù–û: –£–ø—É—â–µ–Ω–Ω–∞—è –≤—ã–≥–æ–¥–∞ –æ—Ç –µ–∂–µ–º–µ—Å—è—á–Ω–æ–π —Ä–∞–∑–Ω–∏—Ü—ã –≤ –ø–ª–∞—Ç–µ–∂–∞—Ö
            // –ï—Å–ª–∏ –∞—Ä–µ–Ω–¥–∞ –¥–µ—à–µ–≤–ª–µ –∏–ø–æ—Ç–µ–∫–∏, —ç—Ç–∞ —Ä–∞–∑–Ω–∏—Ü–∞ –º–æ–≥–ª–∞ –±—ã –±—ã—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞
            let monthlySavingsOpportunityCost = 0;
            let tempRent = monthlyRent;
            for (let year = 1; year <= comparisonPeriod; year++) {
                const yearlyRent = tempRent * 12;
                const yearlyMortgage = monthlyPayment * 12;
                const yearlyDifference = yearlyMortgage - yearlyRent;

                if (yearlyDifference > 0) {
                    // –ï—Å–ª–∏ –∏–ø–æ—Ç–µ–∫–∞ –¥–æ—Ä–æ–∂–µ –∞—Ä–µ–Ω–¥—ã, –∏–Ω–≤–µ—Å—Ç–∏—Ä—É–µ–º —Ä–∞–∑–Ω–∏—Ü—É
                    const yearsRemaining = comparisonPeriod - year;
                    const futureValue = yearlyDifference * Math.pow(1 + investmentReturn / 100, yearsRemaining);
                    monthlySavingsOpportunityCost += futureValue;
                }

                tempRent *= (1 + rentGrowth / 100);
            }

            // –û–±—â–∞—è —É–ø—É—â–µ–Ω–Ω–∞—è –≤—ã–≥–æ–¥–∞ –ø—Ä–∏ –∞—Ä–µ–Ω–¥–µ
            const totalOpportunityCost = downPaymentOpportunityCost + monthlySavingsOpportunityCost;
            totalRentCost += totalOpportunityCost;
            const maintenanceTotal = maintenanceCost * 12 * comparisonPeriod;
            const propertyTaxTotal = propertyTax * comparisonPeriod;
            
            // Calculate property appreciation
            const futurePropertyValue = propertyPrice * Math.pow(1 + propertyGrowth / 100, comparisonPeriod);
            const grossAppreciation = futurePropertyValue - propertyPrice;
            
            // Calculate capital gains tax (13% if owned less than 5 years)
            let capitalGainsTax = 0;
            if (comparisonPeriod < 5 && grossAppreciation > 0) {
                capitalGainsTax = grossAppreciation * 0.13; // 13% –ø–æ–¥–æ—Ö–æ–¥–Ω—ã–π –Ω–∞–ª–æ–≥
            }
            const netAppreciation = grossAppreciation - capitalGainsTax;

            // –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–æ–±–∞–≤–ª–µ–Ω –Ω–∞–ª–æ–≥–æ–≤—ã–π –≤—ã—á–µ—Ç –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ (260 —Ç—ã—Å —Å –ø–æ–∫—É–ø–∫–∏ + –¥–æ 390 —Ç—ã—Å —Å –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤)
            const totalBuyCost = downPayment + mortgagePayments + maintenanceTotal + propertyTaxTotal + transactionCosts - netAppreciation - taxDeduction;

            // Calculate savings and winner
            const savings = totalRentCost - totalBuyCost;
            const winner = savings > 0 ? 'buy' : 'rent';
            const winnerText = savings > 0 ? '–ü–æ–∫—É–ø–∫–∞ –≤—ã–≥–æ–¥–Ω–µ–µ' : '–ê—Ä–µ–Ω–¥–∞ –≤—ã–≥–æ–¥–Ω–µ–µ';

            // Find break-even point (simplified calculation)
            const breakevenYear = Math.abs(savings) / (monthlyRent * 12) + 2; // Approximation

            // Update basic results
            document.getElementById('basicWinner').textContent = winnerText;
            document.getElementById('basicWinner').className = `result-value ${winner === 'buy' ? 'winner' : 'loser'}`;
            document.getElementById('basicSavings').textContent = formatNumber(Math.abs(savings)) + ' ‚ÇΩ';

            // Update advanced results
            document.getElementById('totalRentCost').textContent = formatNumber(totalRentCost) + ' ‚ÇΩ';
            document.getElementById('totalBuyCost').textContent = formatNumber(totalBuyCost) + ' ‚ÇΩ';
            document.getElementById('totalSavings').textContent = formatNumber(Math.abs(savings)) + ' ‚ÇΩ';
            document.getElementById('breakevenPoint').textContent = breakevenYear.toFixed(1) + ' –≥–æ–¥–∞';

            if (currentMode === 'advanced') {
                updateAdvancedResults(totalRentCost, totalBuyCost, savings, winner, mortgagePayments, maintenanceTotal,
                                    transactionCosts, netAppreciation, utilityCost, opportunityCost);
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é —Ä–∞—Å—á–µ—Ç–æ–≤
            updateCalculationDetails();
        }

        function updateAdvancedResults(totalRentCost, totalBuyCost, savings, winner, mortgagePayments, 
                                     maintenanceTotal, transactionCosts, appreciation, utilityCost, opportunityCost) {
            
            // Update comparison cards
            document.getElementById('rentTotalCost').textContent = formatNumber(totalRentCost) + ' ‚ÇΩ';
            document.getElementById('buyTotalCost').textContent = formatNumber(totalBuyCost) + ' ‚ÇΩ';

            const rentOption = document.getElementById('rentOption');
            const buyOption = document.getElementById('buyOption');
            
            rentOption.classList.remove('winner');
            buyOption.classList.remove('winner');
            
            if (winner === 'rent') {
                rentOption.classList.add('winner');
                document.getElementById('rentSavings').textContent = `–≠–∫–æ–Ω–æ–º–∏—è: ${formatNumber(Math.abs(savings))} ‚ÇΩ`;
                document.getElementById('buySavings').textContent = '';
            } else {
                buyOption.classList.add('winner');
                document.getElementById('buySavings').textContent = `–≠–∫–æ–Ω–æ–º–∏—è: ${formatNumber(Math.abs(savings))} ‚ÇΩ`;
                document.getElementById('rentSavings').textContent = '';
            }

            // Update cost breakdown
            const rentPayments = totalRentCost - utilityCost - opportunityCost;
            document.getElementById('rentPayments').textContent = formatNumber(rentPayments) + ' ‚ÇΩ';
            document.getElementById('rentUtilities').textContent = formatNumber(utilityCost) + ' ‚ÇΩ';
            document.getElementById('rentOpportunityCost').textContent = formatNumber(opportunityCost) + ' ‚ÇΩ';
            document.getElementById('rentTotal').textContent = formatNumber(totalRentCost) + ' ‚ÇΩ';

            document.getElementById('mortgagePayments').textContent = formatNumber(mortgagePayments) + ' ‚ÇΩ';
            document.getElementById('maintenanceTotal').textContent = formatNumber(maintenanceTotal) + ' ‚ÇΩ';
            document.getElementById('transactionTotal').textContent = formatNumber(transactionCosts) + ' ‚ÇΩ';
            document.getElementById('appreciationBenefit').textContent = formatNumber(-appreciation) + ' ‚ÇΩ';
            document.getElementById('buyTotal').textContent = formatNumber(totalBuyCost) + ' ‚ÇΩ';
        }

        function resetCalculator() {
            document.getElementById('propertyPrice').value = 8000000;
            document.getElementById('monthlyRent').value = 80000;
            document.getElementById('downPayment').value = 2400000;
            document.getElementById('mortgageRate').value = 8.5;
            document.getElementById('rentGrowth').value = 4;
            document.getElementById('propertyGrowth').value = 3;
            document.getElementById('maintenanceCost').value = 20000;
            document.getElementById('propertyTax').value = 15000;
            document.getElementById('investmentReturn').value = 7;
            document.getElementById('transactionCosts').value = 400000;
            document.getElementById('comparisonPeriod').value = 10;
            calculateComparison();
        }

        function exportToPDF() {
            if (typeof ym !== 'undefined') {
                ym(104341432, 'reachGoal', 'pdf_export', {calculator: 'rent_vs_buy'});
            }
            // Use the improved PDF export system
            exportRentVsBuyToPDF();
        }

        function exportToExcel() {
            if (typeof ym !== 'undefined') {
                ym(104341432, 'reachGoal', 'excel_export', {calculator: 'rent_vs_buy'});
            }
            let csvContent = '\uFEFF';
            csvContent += '–ú2 - –ê—Ä–µ–Ω–¥–∞ vs –ü–æ–∫—É–ø–∫–∞\n';
            csvContent += `–î–∞—Ç–∞ —Ä–∞—Å—á—ë—Ç–∞,${new Date().toLocaleString('ru-RU')}\n\n`;
            // Add calculator-specific data here based on inputs
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.setAttribute('href', URL.createObjectURL(blob));
            link.setAttribute('download', `m2_rent_vs_buy_${new Date().getTime()}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            showNotification('Excel —Ñ–∞–π–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω', 'success');
        }

        // Debouncing function for better performance
        function debounce(func, delay) {
            let timeoutId;
            return function (...args) {
                clearTimeout(timeoutId);
                timeoutId = setTimeout(() => func.apply(this, args), delay);
            };
        }

        // Debounced calculation function with 150ms delay for Doherty Threshold compliance
        const debouncedCalculateComparison = debounce(calculateComparison, 150);

        // Event listeners with debouncing
        document.getElementById('propertyPrice').addEventListener('input', debouncedCalculateComparison);
        document.getElementById('monthlyRent').addEventListener('input', debouncedCalculateComparison);
        document.getElementById('downPayment').addEventListener('input', debouncedCalculateComparison);
        document.getElementById('mortgageRate').addEventListener('input', debouncedCalculateComparison);
        document.getElementById('rentGrowth').addEventListener('input', debouncedCalculateComparison);
        document.getElementById('propertyGrowth').addEventListener('input', debouncedCalculateComparison);
        document.getElementById('maintenanceCost').addEventListener('input', debouncedCalculateComparison);
        document.getElementById('propertyTax').addEventListener('input', debouncedCalculateComparison);
        document.getElementById('investmentReturn').addEventListener('input', debouncedCalculateComparison);
        document.getElementById('transactionCosts').addEventListener('input', debouncedCalculateComparison);
        document.getElementById('comparisonPeriod').addEventListener('input', debouncedCalculateComparison);

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞—Å—á–µ—Ç–æ–≤
        function toggleCalculationDetails() {
            const content = document.getElementById('detailsContent');
            const button = content.previousElementSibling.querySelector('button');
            
            if (content.style.display === 'none') {
                content.style.display = 'block';
                button.textContent = '–°–∫—Ä—ã—Ç—å —Ä–∞—Å—á–µ—Ç—ã';
                updateCalculationDetails();
            } else {
                content.style.display = 'none';
                button.textContent = '–ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å—á–µ—Ç—ã';
            }
        }

        function updateCalculationDetails() {
            const propertyPrice = parseFloat(document.getElementById('propertyPrice').value) || 0;
            const monthlyRent = parseFloat(document.getElementById('monthlyRent').value) || 0;
            const downPayment = parseFloat(document.getElementById('downPayment').value) || 0;
            const mortgageRate = parseFloat(document.getElementById('mortgageRate').value) || 0;
            const rentGrowth = parseFloat(document.getElementById('rentGrowth').value) || 0;
            const propertyGrowth = parseFloat(document.getElementById('propertyGrowth').value) || 0;
            const maintenanceCost = parseFloat(document.getElementById('maintenanceCost').value) || 0;
            const propertyTax = parseFloat(document.getElementById('propertyTax').value) || 0;
            const investmentReturn = parseFloat(document.getElementById('investmentReturn').value) || 0;
            const transactionCosts = parseFloat(document.getElementById('transactionCosts').value) || 0;
            const comparisonPeriod = parseFloat(document.getElementById('comparisonPeriod').value) || 0;

            const stepsContainer = document.getElementById('calculationSteps');
            
            // –†–∞—Å—á–µ—Ç—ã –∞—Ä–µ–Ω–¥—ã
            let totalRentCost = 0;
            let currentRent = monthlyRent;
            for (let year = 1; year <= comparisonPeriod; year++) {
                totalRentCost += currentRent * 12;
                currentRent *= (1 + rentGrowth / 100);
            }
            const utilityCost = totalRentCost * 0.15;
            totalRentCost += utilityCost;
            const opportunityCost = downPayment * Math.pow(1 + investmentReturn / 100, comparisonPeriod) - downPayment;
            totalRentCost += opportunityCost;

            // –†–∞—Å—á–µ—Ç—ã –ø–æ–∫—É–ø–∫–∏
            const loanAmount = propertyPrice - downPayment;
            const monthlyRate = mortgageRate / 100 / 12;
            const numberOfPayments = 30 * 12;
            
            let monthlyPayment = 0;
            if (loanAmount > 0 && monthlyRate > 0) {
                monthlyPayment = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / 
                                (Math.pow(1 + monthlyRate, numberOfPayments) - 1);
            }
            const mortgagePayments = Math.min(monthlyPayment * 12 * comparisonPeriod, loanAmount * 1.5);
            const maintenanceTotal = maintenanceCost * 12 * comparisonPeriod;
            const propertyTaxTotal = propertyTax * comparisonPeriod;
            const futurePropertyValue = propertyPrice * Math.pow(1 + propertyGrowth / 100, comparisonPeriod);
            const grossAppreciation = futurePropertyValue - propertyPrice;
            
            // Calculate capital gains tax
            let capitalGainsTax = 0;
            if (comparisonPeriod < 5 && grossAppreciation > 0) {
                capitalGainsTax = grossAppreciation * 0.13;
            }
            const netAppreciation = grossAppreciation - capitalGainsTax;
            const totalBuyCost = downPayment + mortgagePayments + maintenanceTotal + propertyTaxTotal + transactionCosts - netAppreciation;

            const savings = totalRentCost - totalBuyCost;
            const winner = savings > 0 ? 'buy' : 'rent';

            stepsContainer.innerHTML = `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 20px;">
                    <div style="background: #f8f9fa; padding: 25px; border-radius: 12px; border-left: 4px solid #dc3545;">
                        <h4 style="color: #dc3545; margin-bottom: 20px; font-size: 18px;">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 8px;">
                                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                <polyline points="9,22 9,12 15,12 15,22"></polyline>
                            </svg>
                            –°—Ü–µ–Ω–∞—Ä–∏–π "–ê—Ä–µ–Ω–¥–∞"
                        </h4>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>1. –†–∞—Å—á–µ—Ç –∞—Ä–µ–Ω–¥–Ω–æ–π –ø–ª–∞—Ç—ã –∑–∞ ${comparisonPeriod} –ª–µ—Ç:</strong><br>
                            –ù–∞—á–∞–ª—å–Ω–∞—è –∞—Ä–µ–Ω–¥–∞: ${formatNumber(monthlyRent)} ‚ÇΩ/–º–µ—Å<br>
                            –†–æ—Å—Ç: ${rentGrowth}% –≤ –≥–æ–¥<br>
                            –ò—Ç–æ–≥–æ –∞—Ä–µ–Ω–¥–∞: ${formatNumber(totalRentCost - utilityCost - opportunityCost)} ‚ÇΩ
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>2. –ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ (15% –æ—Ç –∞—Ä–µ–Ω–¥—ã):</strong><br>
                            ${formatNumber(utilityCost)} ‚ÇΩ
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>3. –£–ø—É—â–µ–Ω–Ω–∞—è –≤—ã–≥–æ–¥–∞ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –≤–∑–Ω–æ—Å–∞:</strong><br>
                            ${formatNumber(downPayment)} ‚ÇΩ –ø–æ–¥ ${investmentReturn}% –≥–æ–¥–æ–≤—ã—Ö<br>
                            –ó–∞ ${comparisonPeriod} –ª–µ—Ç: ${formatNumber(opportunityCost)} ‚ÇΩ
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>4. –ü–ª—é—Å—ã –∞—Ä–µ–Ω–¥—ã:</strong><br>
                            ‚Ä¢ –ú–æ–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –≥–∏–±–∫–æ—Å—Ç—å<br>
                            ‚Ä¢ –ù–µ—Ç —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ —Ä–µ–º–æ–Ω—Ç<br>
                            ‚Ä¢ –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä—ã–Ω–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏<br>
                            ‚Ä¢ –ú–æ–∂–Ω–æ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω–∏—Ü—É
                        </div>
                        
                        <div style="padding-top: 15px; border-top: 2px solid #dc3545; font-weight: bold;">
                            <strong>–û–±—â–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã: ${formatNumber(totalRentCost)} ‚ÇΩ</strong>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 25px; border-radius: 12px; border-left: 4px solid #28a745;">
                        <h4 style="color: #28a745; margin-bottom: 20px; font-size: 18px;">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 8px;">
                                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                <polyline points="9,22 9,12 15,12 15,22"></polyline>
                            </svg>
                            –°—Ü–µ–Ω–∞—Ä–∏–π "–ü–æ–∫—É–ø–∫–∞"
                        </h4>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>1. –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å:</strong><br>
                            ${formatNumber(downPayment)} ‚ÇΩ (${((downPayment/propertyPrice)*100).toFixed(1)}% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏)
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>2. –ò–ø–æ—Ç–µ—á–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –∑–∞ ${comparisonPeriod} –ª–µ—Ç:</strong><br>
                            –°—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–∞: ${formatNumber(loanAmount)} ‚ÇΩ<br>
                            –°—Ç–∞–≤–∫–∞: ${mortgageRate}% –≥–æ–¥–æ–≤—ã—Ö<br>
                            –ï–∂–µ–º–µ—Å—è—á–Ω–æ: ${formatNumber(monthlyPayment)} ‚ÇΩ<br>
                            –ò—Ç–æ–≥–æ: ${formatNumber(mortgagePayments)} ‚ÇΩ
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>3. –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ:</strong><br>
                            ${formatNumber(maintenanceCost)} ‚ÇΩ/–º–µ—Å √ó ${comparisonPeriod} –ª–µ—Ç = ${formatNumber(maintenanceTotal)} ‚ÇΩ
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>4. –ù–∞–ª–æ–≥ –Ω–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å:</strong><br>
                            ${formatNumber(propertyTax)} ‚ÇΩ/–≥–æ–¥ √ó ${comparisonPeriod} –ª–µ—Ç = ${formatNumber(propertyTaxTotal)} ‚ÇΩ
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>5. –†–∞—Å—Ö–æ–¥—ã –Ω–∞ –ø–æ–∫—É–ø–∫—É:</strong><br>
                            –ù–æ—Ç–∞—Ä–∏—É—Å, —Ä–∏—ç–ª—Ç–æ—Ä: ${formatNumber(transactionCosts)} ‚ÇΩ
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>6. –†–æ—Å—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏:</strong><br>
                            ${propertyGrowth}% –≤ –≥–æ–¥ –∑–∞ ${comparisonPeriod} –ª–µ—Ç<br>
                            –í–∞–ª–æ–≤—ã–π –ø—Ä–∏—Ä–æ—Å—Ç: ${formatNumber(grossAppreciation)} ‚ÇΩ<br>
                            ${comparisonPeriod < 5 && grossAppreciation > 0 ? 
                                `–ù–∞–ª–æ–≥ —Å –ø—Ä–∏–±—ã–ª–∏ (13%): ${formatNumber(capitalGainsTax)} ‚ÇΩ<br>` : 
                                '–ù–∞–ª–æ–≥ —Å –ø—Ä–∏–±—ã–ª–∏: –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ (—Å—Ä–æ–∫ –≤–ª–∞–¥–µ–Ω–∏—è > 5 –ª–µ—Ç)<br>'
                            }
                            <span style="color: #28a745;">–ß–∏—Å—Ç–∞—è –≤—ã–≥–æ–¥–∞: ${formatNumber(netAppreciation)} ‚ÇΩ</span>
                        </div>
                        
                        <div style="padding-top: 15px; border-top: 2px solid #28a745; font-weight: bold;">
                            <strong>–û–±—â–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã: ${formatNumber(totalBuyCost)} ‚ÇΩ</strong>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 30px; padding: 20px; background: linear-gradient(135deg, ${winner === 'buy' ? '#e8f5e8' : '#fff3e0'}, ${winner === 'buy' ? '#f0f9f0' : '#ffeaa7'}); border-radius: 12px; text-align: center;">
                    <h4 style="color: ${winner === 'buy' ? '#2e7d32' : '#f57c00'}; margin-bottom: 15px;">
                        <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" style=\"vertical-align: middle; margin-right: 8px;\">
                            <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"></path>
                            <polyline points=\"22,4 12,14.01 9,11.01\"></polyline>
                        </svg>
                        –ò—Ç–æ–≥–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
                    </h4>
                    <p style="margin: 10px 0; color: #333; font-size: 18px;">
                        <strong>${winner === 'buy' ? '–ü–æ–∫—É–ø–∫–∞ –≤—ã–≥–æ–¥–Ω–µ–µ' : '–ê—Ä–µ–Ω–¥–∞ –≤—ã–≥–æ–¥–Ω–µ–µ'} –Ω–∞ ${formatNumber(Math.abs(savings))} ‚ÇΩ</strong>
                    </p>
                    <p style="margin: 10px 0; color: #666;">
                        –ó–∞ –ø–µ—Ä–∏–æ–¥ ${comparisonPeriod} –ª–µ—Ç –ø—Ä–∏ —Ç–µ–∫—É—â–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö
                    </p>
                    <p style="margin: 10px 0; color: #666; font-size: 14px;">
                        * –†–∞—Å—á–µ—Ç —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–æ—Å—Ç —Ü–µ–Ω, –∏–Ω—Ñ–ª—è—Ü–∏—é –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏. –†–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä—ã–Ω–æ—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π.
                    </p>
                </div>
            `;
        }

        // Initial calculation
        calculateComparison();
    </script>
<script src="m2-layout.js"></script>
</body>
</html>