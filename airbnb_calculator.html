<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú2 ‚Äî –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π –∞—Ä–µ–Ω–¥—ã</title>
    <link rel="stylesheet" href="m2-theme.css">
    <link rel="stylesheet" href="m2-header.css">
    <link rel="stylesheet" href="m2-ui-components.css">
    <link rel="stylesheet" href="quick-fixes.css">
    <meta name="description" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π –∏ –ø–æ—Å—É—Ç–æ—á–Ω–æ–π –∞—Ä–µ–Ω–¥—ã –æ—Ç –ú2. –†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å, –∑–∞–≥—Ä—É–∑–∫—É, —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ. –£—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–∞–ª–æ–≥–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.">
    <meta name="keywords" content="–∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä, –ø–æ—Å—É—Ç–æ—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞, –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏, –ú2, –¥–æ—Ö–æ–¥ –æ—Ç –∞—Ä–µ–Ω–¥—ã, —Å—É—Ç–æ—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞">
    <meta property="og:title" content="–ú2 ‚Äî –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π –∞—Ä–µ–Ω–¥—ã">
    <meta property="og:description" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π –∏ –ø–æ—Å—É—Ç–æ—á–Ω–æ–π –∞—Ä–µ–Ω–¥—ã –æ—Ç –ú2. –†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å, –∑–∞–≥—Ä—É–∑–∫—É, —Ä–∞—Å—Ö–æ–¥—ã.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://m2-calculators-dfol1ftj8-nikita-tita-projects.vercel.app/airbnb_calculator.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="–ú2 ‚Äî –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π –∞—Ä–µ–Ω–¥—ã">
    <meta name="twitter:description" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π –∏ –ø–æ—Å—É—Ç–æ—á–Ω–æ–π –∞—Ä–µ–Ω–¥—ã –æ—Ç –ú2. –†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å, –∑–∞–≥—Ä—É–∑–∫—É, —Ä–∞—Å—Ö–æ–¥—ã.">
    
    <!-- Favicon and Icons -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#4F2CD9">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <script src="tooltip-system.js"></script>
    <script src="pdf-export.js"></script>
    <script src="components.js"></script>
    <script src="ux-enhancements.js"></script>
    <script src="advanced-ux-enhancements.js"></script>
    <script src="analytics.js"></script>
    <script src="m2-enhancements-loader.js"></script>
    <!-- –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();
   for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
   k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js?id=104341432", "ym");
   ym(104341432, "init", {clickmap:true,trackLinks:true,accurateTrackBounce:true,webvisor:true,trackHash:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/104341432" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
            color: #333;
            line-height: 1.4;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo {
            color: #4F2CD9 !important;
            font-size: 48px;
            font-weight: 700;
            color: #4F2CD9;
            margin-bottom: 12px;
        }

        .title {
            font-size: 32px;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
        }

        .subtitle {
            font-size: 18px;
            color: #666;
        }

        .back-link {
            color: #4F2CD9 !important;
            color: #4F2CD9;
            text-decoration: none;
            font-size: 14px;
            margin-bottom: 20px;
            display: inline-block;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .calculator {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            margin-bottom: 40px;
        }

        .inputs, .results {
            background: white;
            border-radius: 16px;
            padding: 28px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .section-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 24px;
            color: #333;
        }

        .input-group {
            margin-bottom: 24px;
        }

        .input-label {
            display: block;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .input-field {
            width: 100%;
            padding: 16px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 16px;
            background: white;
            transition: border-color 0.2s;
            appearance: textfield;
        }

        .input-field:focus {
            outline: none;
            border-color: #4F2CD9;
        }

        .input-field::-webkit-outer-spin-button,
        .input-field::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .quick-buttons {
            display: flex;
            gap: 8px;
            margin-top: 8px;
            flex-wrap: wrap;
        }

        .quick-btn {
            background: #4F2CD9;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s ease;
            min-height: 44px;
        }

        .quick-btn:hover, .quick-btn.active {
            background: #3F23AE;
        }

        .result-item {
            margin-bottom: 24px;
        }

        .result-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 4px;
        }

        .result-value {
            font-size: 28px;
            font-weight: 700;
            color: #333;
        }

        .result-value.primary {
            color: #4F2CD9;
            font-size: 36px;
        }

        .result-value.success {
            color: #28a745;
        }

        .result-value.warning {
            color: #ffc107;
        }

        .result-value.danger {
            color: #dc3545;
        }

        .comparison-section {
            background: white;
            border-radius: 16px;
            padding: 28px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 40px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-top: 24px;
        }

        .comparison-card {
            padding: 24px;
            border-radius: 12px;
            text-align: center;
            color: white;
        }

        .comparison-card.shortterm {
            background: linear-gradient(135deg, #ff5a5f, #c13515);
        }

        .comparison-card.longterm {
            background: linear-gradient(135deg, #28a745, #20c997);
        }

        .comparison-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .comparison-yield {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .comparison-details {
            font-size: 14px;
            opacity: 0.9;
        }

        .seasonal-analysis {
            background: white;
            border-radius: 16px;
            padding: 28px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 40px;
        }

        .month-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }

        .month-item {
            padding: 16px;
            background: #f8f9fa;
            border-radius: 8px;
            text-align: center;
        }

        .month-name {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
        }

        .month-rate {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        .month-income {
            font-size: 12px;
            color: #28a745;
        }

        .action-buttons {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .btn, .btn-primary {
            background: #4F2CD9;
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
            min-height: 48px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover, .btn-primary:hover {
            background: #3F23AE;
        }

        .btn-secondary {
            background: #797981;
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
            min-height: 48px;
        }

        .btn-secondary:hover {
            background: #5A5A61;
        }

        /* Parameter Groups */
        .parameter-group {
            margin-bottom: 32px;
            padding: 24px;
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border: 1px solid #e9ecef;
        }

        .group-header {
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f8f9fa;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            flex-wrap: wrap;
            gap: 10px;
        }

        .group-header h3 {
            margin: 0;
            color: #333;
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .group-description {
            color: #666;
            font-size: 14px;
            font-style: italic;
            flex-basis: 100%;
        }

        @media (max-width: 768px) {
            .calculator {
                grid-template-columns: 1fr;
                gap: 24px;
            }

            .container {
                padding: 24px 16px;
            }

            .inputs, .results, .comparison-section, .seasonal-analysis {
                padding: 24px;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }

            .month-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }
        }
        @media (max-width: 768px) {
            .container { padding: 20px 15px; }
            .input-field, .input-field select { font-size: 16px; padding: 14px; min-height: 48px; }
            .quick-btn { padding: 12px 16px; font-size: 14px; min-height: 44px; }
            .btn, .btn-primary, .btn-secondary { min-height: 48px; padding: 16px 24px; font-size: 16px; }
            .grid-2 { grid-template-columns: 1fr !important; }
            .results-grid { grid-template-columns: 1fr !important; }
            table { display: block; overflow-x: auto; -webkit-overflow-scrolling: touch; }
        }
        @media (max-width: 375px) {
            .container { padding: 12px 8px; }
            .header h1, .title { font-size: 24px; }
        }
    </style>
</head>
<body>
    <!-- M2.ru Header -->
    <header class="m2-header">
        <div class="m2-header-content">
            <!-- Logo -->
            <div class="m2-header-logo">
                <a href="https://m2.ru/" target="_blank" rel="noopener">
                    <svg width="58" height="52" viewBox="0 0 58 52" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M17 0H58V41H41V52H0V11H17V0Z" fill="#3216B5"></path>
                        <path d="M44.157 27.392V24.6531H37.5997V24.6298C39.9124 23.6013 43.9483 21.8471 43.9483 18.1997C43.9483 15.3184 41.5538 12.8572 38.1712 12.8572C34.7887 12.8572 33.0611 15.1883 32.3001 17.2899L34.8036 18.2698C35.3685 16.5165 36.363 15.4468 38.1945 15.4468C39.794 15.4468 41.1117 16.6404 40.9809 18.223C40.8122 20.2646 38.6293 21.7447 36.6206 22.8487C35.0867 23.692 32.7112 24.889 32.7112 24.889V27.392H44.157Z" fill="white"></path>
                        <path d="M12.0522 24.663V38.3574H15.0083V28.0866L19.2383 38.3574H21.4807L25.6344 28.0866V38.3574H28.6158V24.663H24.3094L20.334 34.4851L16.3333 24.663H12.0522Z" fill="white"></path>
                    </svg>
                </a>
            </div>

            <!-- Navigation -->
            <nav class="m2-header-nav">
                <div class="m2-header-nav-menu">
                    <a href="https://m2.ru/moskva/novostroyki/" target="_blank" rel="noopener" class="m2-header-nav-link">–ù–æ–≤–æ—Å—Ç—Ä–æ–π–∫–∏</a>
                    <a href="https://m2.ru/ipoteka/" target="_blank" rel="noopener" class="m2-header-nav-link">–ò–ø–æ—Ç–µ–∫–∞</a>
                    <a href="https://m2.ru/services/deal/" target="_blank" rel="noopener" class="m2-header-nav-link">–°–¥–µ–ª–∫–∞</a>
                    <a href="index.html" class="m2-header-nav-link m2-header-nav-link-active">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã</a>
                </div>
            </nav>

            <!-- User Actions -->
            <div class="m2-header-actions">
                <a href="https://m2.ru/login/" target="_blank" rel="noopener" class="m2-header-login-btn">–í–æ–π—Ç–∏</a>
            </div>
        </div>
    </header>

    <div class="container">
        <a href="index.html" class="back-link">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞–º</a>

        <div class="header">
            <h1 class="title">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π –∞—Ä–µ–Ω–¥—ã</h1>
            <p class="subtitle">–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –æ—Ç –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π –∏ –ø–æ—Å—É—Ç–æ—á–Ω–æ–π –∞—Ä–µ–Ω–¥—ã</p>
        </div>

        <div class="calculator">
            <div class="inputs">
                <!-- –ì—Ä—É–ø–ø–∞ –¥–æ—Ö–æ–¥–æ–≤ -->
                <div class="parameter-group">
                    <div class="group-header">
                        <h3>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 8px;">
                                <line x1="12" y1="1" x2="12" y2="23"></line>
                                <path d="m17 5-5 5-5-5"></path>
                                <path d="m17 13-5 5-5-5"></path>
                            </svg>
                            –î–æ—Ö–æ–¥—ã –æ—Ç –∞—Ä–µ–Ω–¥—ã
                        </h3>
                        <div class="group-description">–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Ö–æ–¥–∞</div>
                    </div>
                
                <div class="input-group">
                    <label class="input-label" for="propertyPrice">–°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</label>
                    <input type="number" id="propertyPrice" class="input-field" value="8000000" min="500000" max="50000000" step="100000">
                    <div class="quick-buttons">
                        <button class="quick-btn" onclick="setValue('propertyPrice', 5000000)">5 –º–ª–Ω</button>
                        <button class="quick-btn active" onclick="setValue('propertyPrice', 8000000)">8 –º–ª–Ω</button>
                        <button class="quick-btn" onclick="setValue('propertyPrice', 12000000)">12 –º–ª–Ω</button>
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label" for="dailyRate">–°—Ä–µ–¥–Ω—è—è —Å—Ç–∞–≤–∫–∞ –∑–∞ —Å—É—Ç–∫–∏</label>
                    <input type="number" id="dailyRate" class="input-field" value="4500" min="1000" max="50000" step="100">
                    <div class="quick-buttons">
                        <button class="quick-btn" onclick="setValue('dailyRate', 3000)">3000 ‚ÇΩ</button>
                        <button class="quick-btn active" onclick="setValue('dailyRate', 4500)">4500 ‚ÇΩ</button>
                        <button class="quick-btn" onclick="setValue('dailyRate', 7000)">7000 ‚ÇΩ</button>
                        <button class="quick-btn" onclick="setValue('dailyRate', 10000)">10000 ‚ÇΩ</button>
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label" for="occupancyRate">–ó–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å, % <span class="help-icon tooltip-trigger" data-term="occupancy-rate">?</span></label>
                    <input type="number" id="occupancyRate" class="input-field" value="65" min="10" max="95" step="1">
                    <div class="quick-buttons">
                        <button class="quick-btn" onclick="setValue('occupancyRate', 50)">50%</button>
                        <button class="quick-btn active" onclick="setValue('occupancyRate', 65)">65%</button>
                        <button class="quick-btn" onclick="setValue('occupancyRate', 80)">80%</button>
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label" for="cleaningFee">–ü–ª–∞—Ç–∞ –∑–∞ —É–±–æ—Ä–∫—É <span class="help-icon tooltip-trigger" data-term="cleaning-fee">?</span></label>
                    <input type="number" id="cleaningFee" class="input-field" value="2000" min="500" max="10000" step="100">
                    <div class="quick-buttons">
                        <button class="quick-btn" onclick="setValue('cleaningFee', 1500)">1500 ‚ÇΩ</button>
                        <button class="quick-btn active" onclick="setValue('cleaningFee', 2000)">2000 ‚ÇΩ</button>
                        <button class="quick-btn" onclick="setValue('cleaningFee', 3000)">3000 ‚ÇΩ</button>
                    </div>
                </div>
                </div>

                <!-- –ì—Ä—É–ø–ø–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ -->
                <div class="parameter-group">
                    <div class="group-header">
                        <h3>üìâ –†–∞—Å—Ö–æ–¥—ã –∏ –∫–æ–º–∏—Å—Å–∏–∏</h3>
                        <div class="group-description">–ó–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</div>
                    </div>

                <div class="input-group">
                    <label class="input-label" for="platformCommission">–ö–æ–º–∏—Å—Å–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, % <span class="help-icon tooltip-trigger" data-term="platform-commission">?</span></label>
                    <input type="number" id="platformCommission" class="input-field" value="3" min="0" max="20" step="0.5">
                    <div class="quick-buttons">
                        <button class="quick-btn active" onclick="setValue('platformCommission', 3)">–ù–∏–∑–∫–∞—è 3%</button>
                        <button class="quick-btn" onclick="setValue('platformCommission', 15)">–í—ã—Å–æ–∫–∞—è 15%</button>
                        <button class="quick-btn" onclick="setValue('platformCommission', 0)">–ü—Ä—è–º—ã–µ 0%</button>
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label" for="operatingExpenses">–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –≤ –º–µ—Å—è—Ü</label>
                    <input type="number" id="operatingExpenses" class="input-field" value="25000" min="5000" max="100000" step="1000">
                    <div class="quick-buttons">
                        <button class="quick-btn" onclick="setValue('operatingExpenses', 15000)">15 —Ç—ã—Å</button>
                        <button class="quick-btn active" onclick="setValue('operatingExpenses', 25000)">25 —Ç—ã—Å</button>
                        <button class="quick-btn" onclick="setValue('operatingExpenses', 40000)">40 —Ç—ã—Å</button>
                    </div>
                </div>
                </div>

                <!-- –ì—Ä—É–ø–ø–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è -->
                <div class="parameter-group">
                    <div class="group-header">
                        <h3>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 8px;">
                                <path d="M3 3v18h18"></path>
                                <path d="m19 9-5 5-4-4-3 3"></path>
                            </svg>
                            –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
                        </h3>
                        <div class="group-description">–î–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –≤–ª–æ–∂–µ–Ω–∏–π</div>
                    </div>

                <div class="input-group">
                    <label class="input-label" for="longTermRate">–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞ (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ)</label>
                    <input type="number" id="longTermRate" class="input-field" value="80000" min="20000" max="500000" step="5000">
                    <div class="quick-buttons">
                        <button class="quick-btn" onclick="setValue('longTermRate', 60000)">60 —Ç—ã—Å</button>
                        <button class="quick-btn active" onclick="setValue('longTermRate', 80000)">80 —Ç—ã—Å</button>
                        <button class="quick-btn" onclick="setValue('longTermRate', 120000)">120 —Ç—ã—Å</button>
                    </div>
                </div>
                </div>
            </div>

            <div class="results">
                <h2 class="section-title">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</h2>
                
                <div class="result-item">
                    <div class="result-label">–î–æ—Ö–æ–¥ –≤ –º–µ—Å—è—Ü</div>
                    <div class="result-value primary" id="monthlyIncome">87 750 ‚ÇΩ</div>
                </div>

                <div class="result-item">
                    <div class="result-label">–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å –≤ –º–µ—Å—è—Ü</div>
                    <div class="result-value success" id="netProfit">54 130 ‚ÇΩ</div>
                </div>

                <div class="result-item">
                    <div class="result-label">–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –≤ –≥–æ–¥</div>
                    <div class="result-value" id="annualYield">8.1%</div>
                </div>

                <div class="result-item">
                    <div class="result-label">–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–Ω–µ–π –≤ –º–µ—Å—è—Ü</div>
                    <div class="result-value" id="occupiedDays">19.5</div>
                </div>
            </div>
        </div>

        <!-- Comparison Section -->
        <div class="comparison-section">
            <h2 class="section-title">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –∞—Ä–µ–Ω–¥–æ–π</h2>
            <div class="comparison-grid">
                <div class="comparison-card shortterm">
                    <div class="comparison-title">–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞</div>
                    <div class="comparison-yield" id="shorttermYield">8.1%</div>
                    <div class="comparison-details" id="shorttermIncome">54 130 ‚ÇΩ/–º–µ—Å</div>
                </div>
                <div class="comparison-card longterm">
                    <div class="comparison-title">–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞</div>
                    <div class="comparison-yield" id="longTermYield">9.6%</div>
                    <div class="comparison-details" id="longTermIncome">65 000 ‚ÇΩ/–º–µ—Å</div>
                </div>
            </div>
        </div>

        <!-- Seasonal Analysis -->
        <div class="seasonal-analysis">
            <h2 class="section-title">–°–µ–∑–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏</h2>
            <div class="month-grid" id="seasonalGrid">
                <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ JavaScript -->
            </div>
        </div>

        <!-- –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤ -->
        <div class="calculation-details" style="margin: 40px 0; background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <div class="details-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; border-bottom: 2px solid #f0f0f0; padding-bottom: 15px;">
                <h3 style="margin: 0; color: #3416b6; font-size: 24px;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 8px;">
                        <path d="M3 3v18h18"></path>
                        <path d="m19 9-5 5-4-4-3 3"></path>
                    </svg>
                    –ö–∞–∫ –º—ã —Å—á–∏—Ç–∞–µ–º
                </h3>
                <button type="button" onclick="toggleCalculationDetails()" style="background: #3416b6; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 14px;">
                    –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å—á–µ—Ç—ã
                </button>
            </div>
            
            <div id="detailsContent" style="display: none;">
                <div class="calculation-steps" id="calculationSteps"></div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="btn btn-primary" onclick="exportToPDF()">
                –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF
            </button>
            <button class="btn btn-primary" onclick="exportToExcel()" style="background: #4F2CD9;">
                üìä Excel
            </button>
            <button class="btn btn-secondary" onclick="resetCalculator()">
                –°–±—Ä–æ—Å–∏—Ç—å
            </button>
        </div>
    </div>

    <script>
        function formatNumber(num) {
            return new Intl.NumberFormat('ru-RU').format(Math.round(num));
        }

        function formatPercent(num) {
            return num.toFixed(1) + '%';
        }

        function formatCurrencyAdvanced(amount, options = {}) {
            if (window.advancedUX) {
                return window.advancedUX.formatCurrency(amount, options);
            }
            return formatNumber(amount) + ' ‚ÇΩ';
        }

        function formatPercentAdvanced(percent, options = {}) {
            if (window.advancedUX) {
                return window.advancedUX.formatPercent(percent, options);
            }
            return formatPercent(percent);
        }

        function setValue(inputId, value) {
            document.getElementById(inputId).value = value;
            
            const group = document.getElementById(inputId).closest('.input-group');
            if (group) {
                group.querySelectorAll('.quick-btn').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');
            }
            
            calculateShortterm();
        }

        function calculateShortterm() {
            if (typeof ym !== 'undefined') {
                ym(104341432, 'reachGoal', 'calculation_made', {calculator: 'airbnb'});
            }
            const propertyPrice = parseFloat(document.getElementById('propertyPrice').value) || 0;
            const dailyRate = parseFloat(document.getElementById('dailyRate').value) || 0;
            const occupancyRate = parseFloat(document.getElementById('occupancyRate').value) || 0;
            const cleaningFee = parseFloat(document.getElementById('cleaningFee').value) || 0;
            const platformCommission = parseFloat(document.getElementById('platformCommission').value) || 0;
            const operatingExpenses = parseFloat(document.getElementById('operatingExpenses').value) || 0;
            const longTermRate = parseFloat(document.getElementById('longTermRate').value) || 0;

            if (propertyPrice <= 0 || dailyRate <= 0) {
                return;
            }

            // –†–∞—Å—á–µ—Ç –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π –∞—Ä–µ–Ω–¥—ã
            const daysInMonth = 30;
            const occupiedDays = (daysInMonth * occupancyRate) / 100;
            
            // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º —Å—Ä–µ–¥–Ω—é—é –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞—Ä–µ–Ω–¥—ã 2.5 –¥–Ω—è (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞—Å–µ–ª–µ–Ω–∏–π = –¥–Ω–∏ / 2.5)
            const averageStayLength = 2.5;
            const numberOfBookings = occupiedDays / averageStayLength;
            const grossRevenue = (dailyRate * occupiedDays) + (cleaningFee * numberOfBookings);
            const platformFee = grossRevenue * (platformCommission / 100);
            const netRevenue = grossRevenue - platformFee;
            const monthlyProfit = netRevenue - operatingExpenses;
            
            const annualProfit = monthlyProfit * 12;
            const annualYield = (annualProfit / propertyPrice) * 100;

            // –ò–°–ü–†–ê–í–õ–ï–ù–û: –†–∞—Å—á–µ—Ç –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –∞—Ä–µ–Ω–¥—ã —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —Ä–∞—Å—Ö–æ–¥–æ–≤
            // –ü—Ä–∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –∞—Ä–µ–Ω–¥–µ:
            // - –ù–µ—Ç —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ —á–∞—Å—Ç—É—é —É–±–æ—Ä–∫—É (—ç–∫–æ–Ω–æ–º–∏—è ~35% –æ—Ç –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤)
            // - –ù–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (–æ–Ω–∞ —É–∂–µ –≤–∫–ª—é—á–µ–Ω–∞ –≤ operatingExpenses –¥–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π)
            // - –ù–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ, —Ä–µ–º–æ–Ω—Ç, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            const cleaningCostPortion = 0.35; // –ü—Ä–∏–º–µ—Ä–Ω–æ 35% –æ—Ç –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ - —É–±–æ—Ä–∫–∞
            const platformFeePortion = platformCommission / 100; // –ö–æ–º–∏—Å—Å–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

            // –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞: —É–±–∏—Ä–∞–µ–º —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —É–±–æ—Ä–∫—É –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É
            const longTermExpenses = operatingExpenses * (1 - cleaningCostPortion);
            const longTermProfit = longTermRate - longTermExpenses;
            const longTermYield = ((longTermProfit * 12) / propertyPrice) * 100;

            // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
            document.getElementById('monthlyIncome').innerHTML = formatCurrencyAdvanced(netRevenue, { colorCode: false });
            document.getElementById('netProfit').innerHTML = formatCurrencyAdvanced(monthlyProfit, { 
                colorCode: true, 
                showSign: monthlyProfit !== 0 
            });
            document.getElementById('annualYield').innerHTML = formatPercentAdvanced(annualYield, { 
                colorCode: true, 
                benchmark: 8.0 
            });
            document.getElementById('occupiedDays').textContent = occupiedDays.toFixed(1);

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
            document.getElementById('shorttermYield').innerHTML = formatPercentAdvanced(annualYield, { colorCode: false });
            document.getElementById('shorttermIncome').innerHTML = formatCurrencyAdvanced(monthlyProfit, { colorCode: false }) + '/–º–µ—Å';
            document.getElementById('longTermYield').innerHTML = formatPercentAdvanced(longTermYield, { colorCode: false });
            document.getElementById('longTermIncome').innerHTML = formatCurrencyAdvanced(longTermProfit, { colorCode: false }) + '/–º–µ—Å';

            updateSeasonalAnalysis(dailyRate, occupiedDays, cleaningFee, platformCommission, operatingExpenses);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é —Ä–∞—Å—á–µ—Ç–æ–≤
            updateCalculationDetails();
        }

        function updateSeasonalAnalysis(baseRate, baseOccupancy, cleaningFee, commission, expenses) {
            // –ò–°–ü–†–ê–í–õ–ï–ù–û: –†–∞–∑–¥–µ–ª–µ–Ω—ã –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –¥–ª—è —Ü–µ–Ω—ã –∏ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏
            const months = [
                { name: '–Ø–Ω–≤', priceMultiplier: 0.85, occupancyMultiplier: 0.8 },
                { name: '–§–µ–≤', priceMultiplier: 0.9, occupancyMultiplier: 0.85 },
                { name: '–ú–∞—Ä', priceMultiplier: 0.95, occupancyMultiplier: 0.9 },
                { name: '–ê–ø—Ä', priceMultiplier: 1.0, occupancyMultiplier: 1.0 },
                { name: '–ú–∞–π', priceMultiplier: 1.15, occupancyMultiplier: 1.05 },
                { name: '–ò—é–Ω', priceMultiplier: 1.3, occupancyMultiplier: 1.1 },
                { name: '–ò—é–ª', priceMultiplier: 1.5, occupancyMultiplier: 1.0 },  // –í—ã—Å–æ–∫–∏–π —Å–µ–∑–æ–Ω: —Ü–µ–Ω—ã –≤—ã—à–µ, –Ω–æ –∑–∞–Ω—è—Ç–æ—Å—Ç—å –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 100%
                { name: '–ê–≤–≥', priceMultiplier: 1.4, occupancyMultiplier: 1.0 },
                { name: '–°–µ–Ω', priceMultiplier: 1.1, occupancyMultiplier: 1.0 },
                { name: '–û–∫—Ç', priceMultiplier: 1.0, occupancyMultiplier: 0.95 },
                { name: '–ù–æ—è', priceMultiplier: 0.9, occupancyMultiplier: 0.85 },
                { name: '–î–µ–∫', priceMultiplier: 1.0, occupancyMultiplier: 0.9 }   // –ù–æ–≤—ã–π –≥–æ–¥: —Ü–µ–Ω—ã –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ, –∑–∞–Ω—è—Ç–æ—Å—Ç—å —Å—Ä–µ–¥–Ω—è—è
            ];

            const grid = document.getElementById('seasonalGrid');
            grid.innerHTML = '';

            months.forEach(month => {
                const seasonalRate = baseRate * month.priceMultiplier;
                const seasonalOccupancy = Math.min(baseOccupancy * month.occupancyMultiplier, 30);
                
                const grossRevenue = (seasonalRate * seasonalOccupancy) + (cleaningFee * seasonalOccupancy * 0.5);
                const platformFee = grossRevenue * (commission / 100);
                const netRevenue = grossRevenue - platformFee;
                const monthlyProfit = netRevenue - expenses;

                const monthItem = document.createElement('div');
                monthItem.className = 'month-item';
                monthItem.innerHTML = `
                    <div class="month-name">${month.name}</div>
                    <div class="month-rate">${formatNumber(seasonalRate)} ‚ÇΩ</div>
                    <div class="month-income">${formatNumber(monthlyProfit)} ‚ÇΩ</div>
                `;
                grid.appendChild(monthItem);
            });
        }

        function resetCalculator() {
            document.getElementById('propertyPrice').value = 8000000;
            document.getElementById('dailyRate').value = 4500;
            document.getElementById('occupancyRate').value = 65;
            document.getElementById('cleaningFee').value = 2000;
            document.getElementById('platformCommission').value = 3;
            document.getElementById('operatingExpenses').value = 25000;
            document.getElementById('longTermRate').value = 80000;
            calculateShortterm();
        }

        function exportToPDF() {
            if (typeof ym !== 'undefined') {
                ym(104341432, 'reachGoal', 'pdf_export', {calculator: 'airbnb'});
            }
            // Use the improved PDF export system
            exportAirbnbToPDF();
        }

        function exportToExcel() {
            if (typeof ym !== 'undefined') {
                ym(104341432, 'reachGoal', 'excel_export', {calculator: 'airbnb'});
            }
            let csvContent = '\uFEFF';
            csvContent += '–ú2 - –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞\n';
            csvContent += `–î–∞—Ç–∞ —Ä–∞—Å—á—ë—Ç–∞,${new Date().toLocaleString('ru-RU')}\n\n`;
            // Add calculator-specific data here based on inputs
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.setAttribute('href', URL.createObjectURL(blob));
            link.setAttribute('download', `m2_airbnb_${new Date().getTime()}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            showNotification('Excel —Ñ–∞–π–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω', 'success');
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞—Å—á–µ—Ç–æ–≤
        function toggleCalculationDetails() {
            const content = document.getElementById('detailsContent');
            const button = content.previousElementSibling.querySelector('button');
            
            if (content.style.display === 'none') {
                content.style.display = 'block';
                button.textContent = '–°–∫—Ä—ã—Ç—å —Ä–∞—Å—á–µ—Ç—ã';
                updateCalculationDetails();
            } else {
                content.style.display = 'none';
                button.textContent = '–ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å—á–µ—Ç—ã';
            }
        }

        function updateCalculationDetails() {
            const propertyPrice = parseFloat(document.getElementById('propertyPrice').value) || 0;
            const dailyRate = parseFloat(document.getElementById('dailyRate').value) || 0;
            const occupancyRate = parseFloat(document.getElementById('occupancyRate').value) || 0;
            const cleaningFee = parseFloat(document.getElementById('cleaningFee').value) || 0;
            const platformCommission = parseFloat(document.getElementById('platformCommission').value) || 0;
            const operatingExpenses = parseFloat(document.getElementById('operatingExpenses').value) || 0;
            const longTermRate = parseFloat(document.getElementById('longTermRate').value) || 0;

            const stepsContainer = document.getElementById('calculationSteps');
            
            // –†–∞—Å—á–µ—Ç—ã
            const daysInMonth = 30;
            const occupiedDays = (daysInMonth * occupancyRate) / 100;
            const numberOfBookings = occupiedDays / 2.5; // —Å—Ä–µ–¥–Ω—è—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞—Ä–µ–Ω–¥—ã 2.5 –¥–Ω—è
            const grossRevenue = (dailyRate * occupiedDays) + (cleaningFee * numberOfBookings);
            const platformFee = grossRevenue * (platformCommission / 100);
            const netRevenue = grossRevenue - platformFee;
            const monthlyProfit = netRevenue - operatingExpenses;
            const annualProfit = monthlyProfit * 12;
            const annualYield = (annualProfit / propertyPrice) * 100;

            // –†–∞—Å—á–µ—Ç—ã –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –∞—Ä–µ–Ω–¥—ã
            const longTermExpenses = operatingExpenses * 0.4;
            const longTermProfit = longTermRate - longTermExpenses;
            const longTermYield = ((longTermProfit * 12) / propertyPrice) * 100;
            const advantage = monthlyProfit - longTermProfit;

            stepsContainer.innerHTML = `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 20px;">
                    <div style="background: #f8f9fa; padding: 25px; border-radius: 12px; border-left: 4px solid #28a745;">
                        <h4 style="color: #28a745; margin-bottom: 20px; font-size: 18px;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 8px;">
                                <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                <polyline points="9,22 9,12 15,12 15,22"></polyline>
                            </svg>
                            –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞
                        </h4>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>1. –ó–∞–Ω—è—Ç–æ—Å—Ç—å –æ–±—ä–µ–∫—Ç–∞:</strong><br>
                            ${occupancyRate}% –æ—Ç 30 –¥–Ω–µ–π = ${occupiedDays.toFixed(1)} –¥–Ω–µ–π
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>2. –í–∞–ª–æ–≤—ã–π –¥–æ—Ö–æ–¥:</strong><br>
                            ‚Ä¢ –ü—Ä–æ–∂–∏–≤–∞–Ω–∏–µ: ${formatNumber(dailyRate)} √ó ${occupiedDays.toFixed(1)} = ${formatNumber(dailyRate * occupiedDays)} ‚ÇΩ<br>
                            ‚Ä¢ –£–±–æ—Ä–∫–∞: ${formatNumber(cleaningFee)} √ó ${numberOfBookings.toFixed(1)} –∑–∞—Å–µ–ª–µ–Ω–∏–π = ${formatNumber(cleaningFee * numberOfBookings)} ‚ÇΩ<br>
                            = ${formatNumber(grossRevenue)} ‚ÇΩ
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>3. –ö–æ–º–∏—Å—Å–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (${platformCommission}%):</strong><br>
                            ${formatNumber(grossRevenue)} √ó ${platformCommission}% = ${formatNumber(platformFee)} ‚ÇΩ
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>4. –ß–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥:</strong><br>
                            ${formatNumber(grossRevenue)} - ${formatNumber(platformFee)} = ${formatNumber(netRevenue)} ‚ÇΩ
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>5. –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã:</strong><br>
                            ${formatNumber(operatingExpenses)} ‚ÇΩ/–º–µ—Å
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>6. –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å:</strong><br>
                            ${formatNumber(netRevenue)} - ${formatNumber(operatingExpenses)} = ${formatNumber(monthlyProfit)} ‚ÇΩ
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>7. –ì–æ–¥–æ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å:</strong><br>
                            (${formatNumber(monthlyProfit)} √ó 12) √∑ ${formatNumber(propertyPrice)} √ó 100% = ${formatPercent(annualYield)}
                        </div>
                        
                        <div style="padding-top: 15px; border-top: 2px solid #28a745; font-weight: bold;">
                            <strong>–ü—Ä–∏–±—ã–ª—å –≤ –º–µ—Å—è—Ü: ${formatNumber(monthlyProfit)} ‚ÇΩ</strong><br>
                            <strong>–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å: ${formatPercent(annualYield)}</strong>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 25px; border-radius: 12px; border-left: 4px solid #007bff;">
                        <h4 style="color: #4F2CD9; margin-bottom: 20px; font-size: 18px;">üè¢ –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞</h4>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>1. –ú–µ—Å—è—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞:</strong><br>
                            ${formatNumber(longTermRate)} ‚ÇΩ
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>2. –ü—É—Å—Ç–æ—Ç–∞ –∏ —Å–º–µ–Ω–∞ –∂–∏–ª—å—Ü–æ–≤:</strong><br>
                            –°—Ç–∞–±–∏–ª—å–Ω–æ –≤–µ—Å—å –º–µ—Å—è—Ü
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>3. –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã:</strong><br>
                            ${formatNumber(operatingExpenses)} √ó 40% = ${formatNumber(longTermExpenses)} ‚ÇΩ<br>
                            <small>(–º–µ–Ω—å—à–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ)</small>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>4. –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å:</strong><br>
                            ${formatNumber(longTermRate)} - ${formatNumber(longTermExpenses)} = ${formatNumber(longTermProfit)} ‚ÇΩ
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>5. –ì–æ–¥–æ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å:</strong><br>
                            (${formatNumber(longTermProfit)} √ó 12) √∑ ${formatNumber(propertyPrice)} √ó 100% = ${formatPercent(longTermYield)}
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <strong>6. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</strong><br>
                            ‚Ä¢ –°—Ç–∞–±–∏–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥<br>
                            ‚Ä¢ –ú–µ–Ω—å—à–µ —Ö–ª–æ–ø–æ—Ç<br>
                            ‚Ä¢ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
                        </div>
                        
                        <div style="padding-top: 15px; border-top: 2px solid #007bff; font-weight: bold;">
                            <strong>–ü—Ä–∏–±—ã–ª—å –≤ –º–µ—Å—è—Ü: ${formatNumber(longTermProfit)} ‚ÇΩ</strong><br>
                            <strong>–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å: ${formatPercent(longTermYield)}</strong>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 30px; padding: 20px; background: linear-gradient(135deg, ${advantage > 0 ? '#e8f5e8' : '#fff3e0'}, ${advantage > 0 ? '#f0f9f0' : '#ffeaa7'}); border-radius: 12px; text-align: center;">
                    <h4 style="color: ${advantage > 0 ? '#2e7d32' : '#f57c00'}; margin-bottom: 15px;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 8px;">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="m9 12 2 2 4-4"></path>
                        </svg>
                        –ò—Ç–æ–≥–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
                    </h4>
                    <p style="margin: 10px 0; color: #333; font-size: 18px;">
                        <strong>${advantage > 0 ? '–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞ –≤—ã–≥–æ–¥–Ω–µ–µ' : '–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞ –≤—ã–≥–æ–¥–Ω–µ–µ'} –Ω–∞ ${formatNumber(Math.abs(advantage))} ‚ÇΩ –≤ –º–µ—Å—è—Ü</strong>
                    </p>
                    <p style="margin: 10px 0; color: #666;">
                        –†–∞–∑–Ω–∏—Ü–∞ –≤ –≥–æ–¥–æ–≤–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏: <strong>${(annualYield - longTermYield).toFixed(1)}%</strong>
                    </p>
                    <p style="margin: 10px 0; color: #666; font-size: 14px;">
                        * –£—á–∏—Ç—ã–≤–∞–π—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã: –≤—Ä–µ–º—è –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å, —Ä–∏—Å–∫–∏
                    </p>
                </div>
            `;
        }

        // Debounced calculation functions
        let calculationTimeout = null;
        
        function debouncedCalculateShortterm() {
            clearTimeout(calculationTimeout);
            calculationTimeout = setTimeout(() => {
                calculateShortterm();
            }, 150); // Doherty Threshold compliance - under 400ms
        }

        // Event listeners with debouncing
        document.getElementById('propertyPrice').addEventListener('input', debouncedCalculateShortterm);
        document.getElementById('dailyRate').addEventListener('input', debouncedCalculateShortterm);
        document.getElementById('occupancyRate').addEventListener('input', debouncedCalculateShortterm);
        document.getElementById('cleaningFee').addEventListener('input', debouncedCalculateShortterm);
        document.getElementById('platformCommission').addEventListener('input', debouncedCalculateShortterm);
        document.getElementById('operatingExpenses').addEventListener('input', debouncedCalculateShortterm);
        document.getElementById('longTermRate').addEventListener('input', debouncedCalculateShortterm);

        // Initial calculation
        calculateShortterm();
        
        // Initialize UX enhancements
        document.addEventListener('DOMContentLoaded', function() {
            if (window.uxEnhancer) {
                // Highlight main comparison results
                setTimeout(() => {
                    window.uxEnhancer.highlightMainResult('.comparison-card.shortterm');
                    window.uxEnhancer.groupResults(['.comparison-card', '.seasonal-analysis']);
                }, 100);
            }

            // Apply advanced UX enhancements
            if (window.advancedUX) {
                // Group calculation results using cognitive load principles
                const resultsContainer = document.querySelector('.results');
                if (resultsContainer) {
                    window.advancedUX.groupInformation(resultsContainer, 5);
                }

                // Add progressive disclosure to seasonal analysis
                const seasonalSection = document.querySelector('.seasonal-analysis');
                if (seasonalSection) {
                    // Convert seasonal grid to progressive disclosure
                    const seasonalGrid = seasonalSection.querySelector('.month-grid');
                    const seasonalContent = seasonalGrid.outerHTML;
                    
                    const disclosureSection = window.advancedUX.createDisclosureSection(
                        '–ü–æ–¥—Ä–æ–±–Ω—ã–π —Å–µ–∑–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ –º–µ—Å—è—Ü–∞–º',
                        seasonalContent,
                        { priority: 'secondary', initiallyOpen: false }
                    );
                    
                    seasonalGrid.style.display = 'none';
                    seasonalSection.appendChild(disclosureSection);
                }

                // Add formula tooltips
                const yieldElement = document.getElementById('annualYield').parentElement;
                if (yieldElement) {
                    window.advancedUX.createFormulaTooltip(
                        yieldElement,
                        '–ì–æ–¥–æ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å = (–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å √ó 12) √∑ –°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ √ó 100%',
                        '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—É—é –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –≤ –≥–æ–¥ —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤'
                    );
                }

                // Setup input validation
                const priceInput = document.getElementById('propertyPrice');
                if (priceInput) {
                    priceInput.setAttribute('data-validation', 'positive,price');
                }

                const rateInput = document.getElementById('occupancyRate');
                if (rateInput) {
                    rateInput.setAttribute('data-validation', 'percentage');
                }

                // Initialize validation after setting attributes
                window.advancedUX.initializeValidation();
            }
        });
    </script>
<script src="m2-layout.js"></script>
</body>
</html>